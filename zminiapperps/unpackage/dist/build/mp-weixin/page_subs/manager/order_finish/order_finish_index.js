"use strict";const t=require("../../../common/vendor.js");if(!Array){(t.resolveComponent("uni-section")+t.resolveComponent("v-button-w80"))()}Math||((()=>"../../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../../components/v-button-w80/v-button-w80.js"))();const e={__name:"order_finish_index",setup(e){const o=t.ref(t.index.$enum),n=t.ref({});let a="";t.onLoad((e=>{if(a=e.sn||"",!a)return t.index.$tool.tip("订单编号不存在",!0,(()=>t.index.$tool.navto("/page_subs/manager/order_finish/order_finish_welcome")));t.index.$http.post(`v1/getOrderDetailForFinish/${a}`).then((t=>{n.value=t.data.order}))}));const i=t.index.$tool.throttle((()=>{t.index.$tool.confirm("确定要核销吗？",(()=>{!async function(){t.index.$tool.showLoading();const e=await t.index.$http.post("v1/finishOrder/"+a);if(t.index.$tool.hideLoading(),1!=e.code)return t.index.$tool.tip(e.info||"系统错误");t.index.$tool.alert(e.info||"操作成功",(()=>{n.value=e.data.order}))}()}))}));return(e,a)=>{var l;return t.e({a:n.value.station_title},n.value.station_title?{b:t.p({type:"line",titleFontSize:"32rpx",title:"水站信息"}),c:t.t(n.value.station_title),d:t.t(n.value.station_link_name),e:t.t(n.value.station_link_phone),f:t.t(n.value.station_address)}:{},{g:n.value.take_name},n.value.take_name?{h:t.p({type:"line",titleFontSize:"32rpx",title:"收货信息"}),i:t.t(n.value.take_name),j:t.t(n.value.take_phone),k:t.t(n.value.take_address)}:{},{l:t.p({type:"line",titleFontSize:"32rpx",title:"订单信息"}),m:n.value.id},n.value.id?t.e({n:t.t(n.value.sn),o:t.t(n.value.goods_amount),p:t.t(n.value.discount_amount||"0.00"),q:t.t(n.value.real_amount||"0.00"),r:t.t(n.value.deliver_fee||"0.00"),s:t.t(n.value.pay_type_txt),t:t.t((null==(l=n.value.coupon)?void 0:l.title)||""),v:t.t(n.value.take_type_txt),w:1==n.value.status},1==n.value.status?{x:t.t(n.value.status_txt)}:{y:t.t(n.value.status_txt)}):{},{z:t.p({type:"line",titleFontSize:"32rpx",title:"订单明细"}),A:t.f(n.value.subs,((e,o,n)=>({a:t.t(e.goods_name),b:t.t(e.goods_number),c:t.t(e.goods_unit),d:t.t(e.goods_self_price),e:t.t(e.goods_amount),f:o}))),B:n.value.remark},n.value.remark?{C:t.p({type:"line",titleFontSize:"32rpx",title:"订单备注"}),D:t.t(n.value.remark)}:{},{E:n.value.status==o.value.order.STATUS_DELIVERING},n.value.status==o.value.order.STATUS_DELIVERING?{F:t.o(t.unref(i)),G:t.p({title:"确认核销"})}:{H:t.p({disabled:!0,title:"确认核销"})})}}},o=t._export_sfc(e,[["__scopeId","data-v-74a718a3"]]);wx.createPage(o);

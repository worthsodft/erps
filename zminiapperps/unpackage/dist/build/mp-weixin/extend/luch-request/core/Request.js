"use strict";const e=require("./dispatchRequest.js"),t=require("./InterceptorManager.js"),r=require("./mergeConfig.js"),i=require("./defaults.js"),s=require("../utils.js"),d=require("../utils/clone.js");exports.Request=class{constructor(e={}){s.isPlainObject(e)||(e={},console.warn("设置全局参数必须接收一个Object")),this.config=d.clone({...i.defaults,...e}),this.interceptors={request:new t.InterceptorManager,response:new t.InterceptorManager}}setConfig(e){this.config=e(this.config)}middleware(t){t=r.mergeConfig(this.config,t);let i=[e.dispatchRequest,void 0],s=Promise.resolve(t);for(this.interceptors.request.forEach((function(e){i.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)}));i.length;)s=s.then(i.shift(),i.shift());return s}request(e={}){return this.middleware(e)}get(e,t={}){return this.middleware({url:e,method:"GET",...t})}post(e,t,r={}){return this.middleware({url:e,data:t,method:"POST",...r})}put(e,t,r={}){return this.middleware({url:e,data:t,method:"PUT",...r})}delete(e,t,r={}){return this.middleware({url:e,data:t,method:"DELETE",...r})}connect(e,t,r={}){return this.middleware({url:e,data:t,method:"CONNECT",...r})}head(e,t,r={}){return this.middleware({url:e,data:t,method:"HEAD",...r})}options(e,t,r={}){return this.middleware({url:e,data:t,method:"OPTIONS",...r})}trace(e,t,r={}){return this.middleware({url:e,data:t,method:"TRACE",...r})}upload(e,t={}){return t.url=e,t.method="UPLOAD",this.middleware(t)}download(e,t={}){return t.url=e,t.method="DOWNLOAD",this.middleware(t)}get version(){return"3.1.0"}};

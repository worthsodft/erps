"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("v-goods-item2")+e.resolveComponent("uni-load-more"))()}Math||((()=>"../../components/v-goods-item2/v-goods-item2.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js"))();const o={__name:"list",setup(o){const t=e.ref([]),a=e.ref("more");let n=1,l=0;async function r(){if("more"!=a.value)return;a.value="loading";const o=await e.index.$http.get("v1/getGoodsPageData?page="+n);if(1!=o.code)return e.index.$tool.tip(o.info||"系统错误");let r=o.data.pageData;0!=r.data.length?(t.value=[...t.value,...r.data],l=r.total,t.value.length>=l?a.value="nomore":(a.value="more",n++)):a.value="nomore"}function s(){t.value=[],a.value="more",n=1,l=0}return e.onShow((()=>{s(),r(),e.index.$api.getCartTotal()})),e.onReachBottom((()=>{r()})),e.onPullDownRefresh((()=>{s(),r(),setTimeout((()=>{e.index.stopPullDownRefresh()}),200)})),e.onShareAppMessage((()=>getApp().globalData.shareData)),(o,n)=>({a:e.f(t.value,((o,t,a)=>({a:o.id,b:"411c8c2c-0-"+a,c:e.p({item:o})}))),b:e.o(r),c:e.p({status:a.value})})}},t=e._export_sfc(o,[["__scopeId","data-v-411c8c2c"]]);o.__runtimeHooks=2,wx.createPage(t);

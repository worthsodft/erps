"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("v-cart-item2")+e.resolveComponent("uni-load-more")+e.resolveComponent("uni-icons"))()}Math||((()=>"../../components/v-cart-item2/v-cart-item2.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js"))();const t={__name:"cart",setup(t){const n=e.ref({}),o=e.ref(0);e.index.$login.judgeLogin((()=>{e.index.$api.getCartTotal()})),e.onShow((()=>{e.index.$http.get("v1/getInitDataCart").then((t=>{n.value=t.data.cart,e.index.$tool.setCartBadge(n.value.total)}))}));const i=e=>{c(e)},a=()=>{let e={index:-1,is_checked:!n.value.is_checked};c(e)},c=t=>{let o={sn:-1==t.index?-1:n.value.list[t.index].sn,is_checked:t.is_checked};e.index.$api.check2cart(o,(e=>{n.value=e.data.cart}))};function l(t){let o=n.value.list;o[t.index];let i={sn:o[t.index].sn,number:t.number};e.index.$api.update2cart(i,(e=>{n.value=e.data.cart}))}function s(t){e.index.$tool.confirm("确认要从购物车删除此项吗？",(()=>{let o=n.value.list;o[t],function(t){e.index.$api.del2cart(t,(e=>{n.value=e.data.cart}))}({sn:o[t].sn})}))}function d(){if(0==n.value.total)return e.index.$tool.tip("商品列表不能为空");e.index.$login.judgePhone((()=>{e.index.$tool.navto("/pages/order/confirm?from=cart")}))}return(t,c)=>e.e({a:e.f(n.value.list,((t,n,o)=>({a:t.id,b:e.o(s,t.id),c:e.o(l,t.id),d:e.o(i,t.id),e:"b224456e-0-"+o,f:e.p({item:t,index:n})}))),b:n.value.list&&n.value.list.length<1},n.value.list&&n.value.list.length<1?{c:e.p({status:"nomore"})}:{},{d:n.value.is_checked},n.value.is_checked?{e:e.p({type:"checkbox-filled",size:"20",color:"#5aa1d8"})}:{f:e.p({type:"checkbox",size:"20",color:"#ccc"})},{g:e.o(a),h:e.t(n.value.amount||"0.00"),i:e.t(n.value.total||0),j:e.o(d),k:o.value})}},n=e._export_sfc(t,[["__scopeId","data-v-b224456e"]]);wx.createPage(n);

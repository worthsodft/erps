"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("v-address-picker")+e.resolveComponent("uni-easyinput")+e.resolveComponent("v-button-w80"))()}Math||((()=>"../../components/v-address-picker/v-address-picker.js")+(()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../components/v-button-w80/v-button-w80.js"))();const t={__name:"address-edit",setup(t){let a="";const i=e.ref({gid:"",district:"",detail:"",link_name:"",link_phone:"",is_default:0}),n=e.ref([]);e.onLoad((t=>{t.gid&&(a=t.gid,async function(){const t=await e.index.$http.get("v1/getAddressDetail/"+a);i.value=t.data.address,i.value.district=t.data.address.district}()),o()}));const o=async()=>{const t=await e.index.$http.get("v1/getCities");n.value=t.data.cities};function l(e){i.value.district=e[0].value}const s=e.index.$tool.throttle((async()=>{if(!(i.value.district?i.value.detail?i.value.link_name?i.value.link_phone?e.index.$tool.isPhone(i.value.link_phone)||e.index.$tool.tip("电话号码格式错误"):e.index.$tool.tip("请输入联系电话"):e.index.$tool.tip("请输入联系人"):e.index.$tool.tip("请输入详细地址"):e.index.$tool.tip("请选择区域")))return;const t=await e.index.$http.post("v1/saveAddress",i.value);e.index.$tool.tip(t.info,!0,(()=>{e.index.$tool.navto("/pages/my/address")})),console.log(t)}));function d({detail:e}){i.value.is_default=e.value?1:0}return(t,a)=>({a:e.o(l),b:e.p({cities:n.value,value:i.value.district}),c:e.o((e=>i.value.detail=e)),d:e.p({type:"textarea",maxlength:"200",autoHeight:!0,placeholder:"请输入详细地址",modelValue:i.value.detail}),e:e.o((e=>i.value.link_name=e)),f:e.p({autoHeight:!0,maxlength:"20",placeholder:"请输入联系人姓名",modelValue:i.value.link_name}),g:e.o((e=>i.value.link_phone=e)),h:e.p({autoHeight:!0,type:"number",maxlength:"20",placeholder:"请输入联系电话",modelValue:i.value.link_phone}),i:1==i.value.is_default,j:e.o(d),k:e.o(e.unref(s)),l:e.p({title:"提交保存"})})}},a=e._export_sfc(t,[["__scopeId","data-v-0707ca09"]]);wx.createPage(a);

"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("v-pay-type-gift-card")+e.resolveComponent("uni-icons")+e.resolveComponent("uni-popup"))()}Math||((()=>"../v-pay-type-gift-card/v-pay-type-gift-card.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const t={__name:"v-pay-type-select",props:{list:Object},emits:["select","reset","useGiftCard"],setup(t,{expose:n,emit:o}){const c=e.ref(0),a=e.ref(),u=e.ref([]),l=o,s=e.ref(!1);function p(e){u.value[e].checked=!u.value[e].checked,s.value=function(){let e=!1;for(let t=0,n=u.value.length;t<n;t++)if(u.value[t].checked){e=!0;break}return e}()}return e.index.$api.getUserInfo((e=>{c.value=e.data.userInfo.money})),e.index.$http.get("v1/getMyUsableGiftCardList").then((e=>{u.value=e.data.giftCardList})),n({open:function(){a.value.open("bottom")},close:function(){a.value.close()}}),(n,o)=>({a:e.f(t.list,((t,n,o)=>e.e({a:"giftcard"==n},"giftcard"==n?e.e({b:e.t(t),c:u.value.length>0},u.value.length>0?e.e({d:e.f(u.value,((t,n,c)=>({a:t.sn,b:e.o(p,t.sn),c:"c79e5f4b-1-"+o+"-"+c+",c79e5f4b-0",d:e.p({card:t,index:n})}))),e:s.value},s.value?{f:e.o((e=>function(e){let t=[],n=0;for(let o=0,c=u.value.length;o<c;o++){let e=u.value[o];e.checked&&(n+=+e.has,t.push(e.sn))}l("select",{payType:e,selectedSn:t,cardHasMoney:n})}(n)),t.id)}:{}):{}):e.e({g:e.t(t),h:"yue"==n},"yue"==n?{i:e.t(c.value)}:{},{j:"c79e5f4b-2-"+o+",c79e5f4b-0",k:e.p({type:"right",color:"#999"}),l:e.o((e=>function(e){for(let t=0,n=u.value.length;t<n;t++)u.value[t].checked&&(u.value[t].checked=!1);s.value=!1,l("select",{payType:e})}(n)),t.id)}),{m:t.id}))),b:e.sr(a,"c79e5f4b-0",{k:"popup"}),c:e.p({"background-color":"#fff"})})}},n=e._export_sfc(t,[["__scopeId","data-v-c79e5f4b"]]);wx.createComponent(n);

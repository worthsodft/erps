"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("uni-file-picker")+e.resolveComponent("uni-easyinput")+e.resolveComponent("v-button-w80")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.js")+(()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../v-button-w80/v-button-w80.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const o={__name:"v-deliver-images",props:{images:Array,sn:String},emits:["success"],setup(o,{expose:n,emit:t}){const i=o,u=e.ref(),p=e.ref("");let s=[],l=[];const r=t;let a=e.index.$tool.throttle((()=>{if(0==l.length)return e.index.$tool.tip("请上传配送照片");e.index.$tool.confirm("是否确认已送达？",(()=>{e.index.$tool.showLoading("上传中..."),async function(o){s=[];for(let n in l){let o={filePath:l[n],name:"file"};const t=await e.index.$http.upload("v1/upload",o);s.push(t.data.url)}o&&o()}((()=>{e.index.$tool.hideLoading();let o={sn:i.sn,urls:s,remark:p.value};e.index.$http.post("v1/deliverOrder",o).then((o=>{1==o.code?(e.index.$tool.tip(o.info||"操作成功"),m(),r("success")):e.index.$tool.tip(o.info||"系统错误")}))}))}))}),1e3);function c({tempFilePaths:e}){l=[...l,...e]}function d({index:e}){l.splice(e,1)}function m(){u.value.close()}function f(e){}return n({open:function(){u.value.open("bottom")},close:m}),(o,n)=>({a:e.o(c),b:e.o(d),c:e.p({limit:"3",title:"最多选择3张图片"}),d:e.o((e=>p.value=e)),e:e.p({type:"textarea",maxlength:"200",placeholder:"请输入配送说明",modelValue:p.value}),f:e.o(e.unref(a)),g:e.p({title:"确定提交"}),h:e.sr(u,"49456e39-0",{k:"itemPopup"}),i:e.o(f),j:e.p({"background-color":"#fff"})})}},n=e._export_sfc(o,[["__scopeId","data-v-49456e39"]]);wx.createComponent(n);

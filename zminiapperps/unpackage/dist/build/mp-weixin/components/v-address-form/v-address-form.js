"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("v-address-picker")+e.resolveComponent("uni-easyinput")+e.resolveComponent("v-button-w80")+e.resolveComponent("uni-popup"))()}Math||((()=>"../v-address-picker/v-address-picker.js")+(()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../v-button-w80/v-button-w80.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const t={__name:"v-address-form",emits:["saveSuccess"],setup(t,{expose:o,emit:n}){let i="";const a={gid:"",district:"",detail:"",link_name:"",link_phone:"",is_default:0},l=e.ref({...a}),s=e.ref([]);e.onLoad((t=>{t.gid&&(i=t.gid,async function(){const t=await e.index.$http.get("v1/getAddressDetail/"+i);l.value=t.data.address}())}));const u=e.ref(),d=n;function p(e){l.value.district=e[0].text}const r=e.index.$tool.throttle((async()=>{if(!(l.value.district?l.value.detail?l.value.link_name?l.value.link_phone||e.index.$tool.tip("请输入联系电话"):e.index.$tool.tip("请输入联系人"):e.index.$tool.tip("请输入详细地址"):e.index.$tool.tip("请选择区域")))return;const t=await e.index.$http.post("v1/saveAddress",l.value);e.index.$tool.tip(t.info,!0,(()=>{d("saveSuccess",t.data.item)}))}));function c({detail:e}){l.value.is_default=e.value?1:0}return o({open:function(){u.value.open()},close:function(){u.value.close()},reset:function(){l.value={...a}},getCities:async()=>{const t=await e.index.$http.get("v1/getCities");s.value=t.data.cities}}),(t,o)=>({a:e.o(p),b:e.o((e=>l.value.district=e)),c:e.p({cities:s.value,modelValue:l.value.district}),d:e.o((e=>l.value.detail=e)),e:e.p({type:"textarea",maxlength:"200",autoHeight:!0,placeholder:"请输入详细地址",modelValue:l.value.detail}),f:e.o((e=>l.value.link_name=e)),g:e.p({autoHeight:!0,maxlength:"20",placeholder:"请输入联系人姓名",modelValue:l.value.link_name}),h:e.o((e=>l.value.link_phone=e)),i:e.p({autoHeight:!0,type:"number",maxlength:"20",placeholder:"请输入联系电话",modelValue:l.value.link_phone}),j:1==l.value.is_default,k:e.o(c),l:e.o(e.unref(r)),m:e.p({title:"提交保存"}),n:e.sr(u,"5848e253-0",{k:"addressFormPopup"}),o:e.p({"background-color":"#fff","mask-background-color":"#000000dd"})})}},o=e._export_sfc(t,[["__scopeId","data-v-5848e253"]]);wx.createComponent(o);

"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const t={__name:"v-order-item2",props:e.mergeModels({item:Object,isInvoice:Boolean},{modelValue:{},modelModifiers:{}}),emits:e.mergeModels(["takeSuccess","cancelSuccess","refundApplySuccess","showFinishOrderPopup","showRefundReasonPopup","selectInvoice"],["update:modelValue"]),setup(t,{emit:o}){const i=e.ref(e.index.$enum);e.ref("");const r=t;e.useModel(t,"modelValue").value=r.item.min_buy_number||1,e.ref(),e.ref(),e.ref();const s=o;function a(){s("selectInvoice",r.item.sn)}async function n(){let t=await async function(){return(await e.index.$http.post("v1/getFinishOrderQrcode/"+r.item.sn)).data.url}();s("showFinishOrderPopup",{qrcode:t,sn:r.item.sn})}function u(){e.index.$tool.navto("/pages/order/confirm?sn="+r.item.sn)}function d(){return"giftcard"==r.item.pay_type?e.index.$tool.tip("实物卡支付方式暂不支持退款"):2==r.item.goods_type?e.index.$tool.tip("实物卡商品订单暂不支持退款"):void s("showRefundReasonPopup",{sn:r.item.sn})}function _(){e.index.$tool.confirm("确定要取消订单吗？",(()=>{e.index.$http.post("v1/cancelOrder/"+r.item.sn).then((t=>{1==t.code?e.index.$tool.success(t.info,!0,(()=>{s("cancelSuccess",t.data.order)})):e.index.$tool.tip(t.info||"取消失败")}))}))}function m(){e.index.$tool.confirm("确定要进行收货操作吗？",(()=>{e.index.$http.post("v1/takeOrder/"+r.item.sn).then((t=>{1==t.code?e.index.$tool.success(t.info,!0,(()=>{s("takeSuccess",t.data.order)})):e.index.$tool.tip(t.info||"收货失败")}))}))}return(o,r)=>e.e({a:e.t(t.item.sn),b:t.item.take_type==i.value.order.TAKE_TYPE_SELF},(t.item.take_type,i.value.order.TAKE_TYPE_SELF,{}),{c:t.item.take_type==i.value.order.TAKE_TYPE_DELIVER},(t.item.take_type,i.value.order.TAKE_TYPE_DELIVER,{}),{d:e.o(u),e:e.f(t.item.subs,((e,t,o)=>({a:e.goods_cover,b:e.id}))),f:e.o(u),g:e.t(t.item.pay_amount),h:e.t(t.item.create_at),i:t.item.pay_at},t.item.pay_at?{j:e.t(t.item.pay_at)}:{},{k:t.item.invoice_no},t.item.invoice_no?{l:e.t(t.item.invoice_no)}:{},{m:t.item.status==i.value.order.STATUS_UNPAY},t.item.status==i.value.order.STATUS_UNPAY||t.item.status==i.value.order.STATUS_DELIVERING&&t.item.deliver_status==i.value.order.DELIVER_STATUS_NOT||t.item.status==i.value.order.STATUS_DELIVERING&&t.item.deliver_status==i.value.order.DELIVER_STATUS_ING||t.item.status==i.value.order.STATUS_FINISHED?{}:t.item.status==i.value.order.STATUS_REFUND?e.e({r:e.t(t.item.refund_status_txt),s:t.item.refund_feedback_msg},t.item.refund_feedback_msg?{t:e.t(t.item.refund_feedback_msg)}:{}):{},{n:t.item.status==i.value.order.STATUS_DELIVERING&&t.item.deliver_status==i.value.order.DELIVER_STATUS_NOT,o:t.item.status==i.value.order.STATUS_DELIVERING&&t.item.deliver_status==i.value.order.DELIVER_STATUS_ING,p:t.item.status==i.value.order.STATUS_FINISHED,q:t.item.status==i.value.order.STATUS_REFUND,v:t.item.status==i.value.order.STATUS_REFUND?1:"",w:t.item.status==i.value.order.STATUS_UNPAY},t.item.status==i.value.order.STATUS_UNPAY?{x:e.o(_),y:e.o(u)}:t.item.status==i.value.order.STATUS_DELIVERING?e.e({A:t.item.take_type==i.value.order.TAKE_TYPE_SELF},t.item.take_type==i.value.order.TAKE_TYPE_SELF?{B:e.o(n)}:{},{C:e.o(d),D:t.item.take_type==i.value.order.TAKE_TYPE_DELIVER},t.item.take_type==i.value.order.TAKE_TYPE_DELIVER?{E:e.o(m)}:{}):t.item.status==i.value.order.STATUS_FINISHED?e.e({G:!t.item.invoice_no&&t.item.invoice_apply_at},!t.item.invoice_no&&t.item.invoice_apply_at||t.item.invoice_no?{}:e.e({I:t.isInvoice},t.isInvoice?{J:e.p({type:"checkbox",size:"22",color:"#da4754"})}:{K:e.p({type:"checkbox",size:"22"})},{L:e.o(a)}),{H:!t.item.invoice_no,M:e.o(u)}):t.item.status==i.value.order.STATUS_REFUND?{O:e.o(u)}:{},{z:t.item.status==i.value.order.STATUS_DELIVERING,F:t.item.status==i.value.order.STATUS_FINISHED,N:t.item.status==i.value.order.STATUS_REFUND})}},o=e._export_sfc(t,[["__scopeId","data-v-07dcc7ff"]]);wx.createComponent(o);

import{_ as e}from"./uni-section.CMa2k4mu.js";import{j as a,e as t,c as l,w as o,g as i,o as u,b as n,O as r,a as s,r as m,F as d}from"./index-CL6v0dEt.js";import{a as v,r as p}from"./uni-app.es.BP3-VgdY.js";import{_ as f}from"./uni-datetime-picker.DHuOAgzB.js";import{_ as c}from"./uni-load-more.ke4e762S.js";import{v as _}from"./v-order-item2-show.B_wydLfD.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.BqWKhNLa.js";const h=g({__name:"order_finish_list",setup(g){let h=uni.$tool.today();const j=a([h,h]),y=a("more"),k=a([]);let w=a(0),x=1;function V(e){0==e.length?j.value=[h,h]:j.value=e,y.value="more",x=1,w.value=0,$("reset")}function $(e){"more"==y.value&&(y.value="loading",uni.$http.post("v1/getMyFinishOrderPageData",{page:x,takeAtRange:j.value}).then((a=>{if(1!=a.code)return uni.$tool.tip(a.info||"系统错误");let t=a.data.pageData;if(w.value=t.total,0==t.total)return y.value="nomore",void(k.value=[]);0!=t.data.length?(k.value="reset"==e?[...t.data]:[...k.value,...t.data],w.value=t.total,k.value.length>=w.value?y.value="nomore":(y.value="more",x++)):y.value="nomore"})))}return $(),v((()=>{$()})),(a,v)=>{const g=p(t("uni-section"),e),h=p(t("uni-datetime-picker"),f),x=i,b=p(t("uni-load-more"),c);return u(),l(x,{class:"container-v order-finish-list"},{default:o((()=>[n(x,{class:"v-w100 v-mb-10"},{default:o((()=>[n(g,{title:"核销时间：",type:"line"}),n(x,{style:{width:"90%","margin-left":"5%"}},{default:o((()=>[n(h,{modelValue:j.value,"onUpdate:modelValue":v[0]||(v[0]=e=>j.value=e),type:"daterange",onChange:V,rangeSeparator:"至"},null,8,["modelValue"])])),_:1}),n(g,{title:"总订单数："+r(w),type:"line"},null,8,["title"])])),_:1}),n(x,{class:"order-finish-item"},{default:o((()=>[(u(!0),s(d,null,m(k.value,((e,a)=>(u(),l(x,{key:e.id},{default:o((()=>[n(_,{item:e},null,8,["item"])])),_:2},1024)))),128)),n(b,{status:y.value,onClick:$},null,8,["status"])])),_:1})])),_:1})}}},[["__scopeId","data-v-c2ae69aa"]]);export{h as default};

import{j as a,s as t,q as e,e as o,a as s,b as l,w as u,F as n,g as r,o as i,r as m,c as p}from"./index-CL6v0dEt.js";import{_ as v}from"./v-goods-item2.C6pEI7H_.js";import{o as c,a as d,b as g,c as f,r as _}from"./uni-app.es.BP3-VgdY.js";import{_ as j}from"./uni-load-more.ke4e762S.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./v-number-box.CWYIRpAv.js";const h=b({__name:"list",setup(b){const h=a([]),x=a("more");let D=1,y=0;async function $(){if("more"!=x.value)return;x.value="loading";const a=await uni.$http.get("v1/getGoodsPageData?page="+D);if(1!=a.code)return uni.$tool.tip(a.info||"系统错误");let t=a.data.pageData;0!=t.data.length?(h.value=[...h.value,...t.data],y=t.total,h.value.length>=y?x.value="nomore":(x.value="more",D++)):x.value="nomore"}function k(){h.value=[],x.value="more",D=1,y=0}return c((()=>{k(),$(),uni.$api.getCartTotal()})),d((()=>{$()})),g((()=>{k(),$(),setTimeout((()=>{t()}),200)})),f((()=>e().globalData.shareData)),(a,t)=>{const e=_(o("v-goods-item2"),v),c=r,d=_(o("uni-load-more"),j);return i(),s(n,null,[l(c,{class:"container-v list"},{default:u((()=>[(i(!0),s(n,null,m(h.value,((a,t)=>(i(),p(e,{key:a.id,item:a},null,8,["item"])))),128))])),_:1}),l(d,{status:x.value,onClick:$},null,8,["status"])],64)}}},[["__scopeId","data-v-411c8c2c"]]);export{h as default};

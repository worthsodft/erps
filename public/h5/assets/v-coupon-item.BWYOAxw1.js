import{j as e,k as t,o as s,c as l,w as a,b as o,x as i,f as n,t as u,O as c,l as f,v as m,h as d,g as p}from"./index-Bk6Bf557.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=_({__name:"v-coupon-item",props:{item:Object,type:{type:String,default:"fetch"},mb:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1}},emits:["select"],setup(_,{emit:y}){const r=_,h=y,k=e("my"==r.type?1:0);t((()=>{"select"==r.type?k.value=1:"my"!=r.type&&(k.value=r.item.has_count>0?1:0)}));const v=uni.$tool.throttle((()=>{uni.$login.judgePhone((()=>{w()}))})),w=()=>{uni.$http.post("v1/fetchCoupon/"+r.item.gid).then((e=>{if(1!=e.code)return uni.$tool.tip(e.info||"系统错误");uni.$tool.tip(e.info||"操作成功")}))};function g(){uni.$tool.navto("/pages/goods/list")}function x(){h("select",r.item)}return(e,t)=>{const y=d,r=p;return s(),l(r,{class:i(["coupon-item",{mb:_.mb}]),style:m(_.fullWidth?"width: 100%;":"width: 400rpx;")},{default:a((()=>[o(r,{class:i(["wrapper","jb-"+k.value])},{default:a((()=>[o(r,{class:"content"},{default:a((()=>[_.item.money>0?(s(),l(r,{key:0,class:"money"},{default:a((()=>[o(y,{class:"v-font-s20"},{default:a((()=>[n("¥")])),_:1}),n(u(_.item.money),1),o(y,{class:"v-font-s20"},{default:a((()=>[n(" 元")])),_:1})])),_:1})):(s(),l(r,{key:1},{default:a((()=>[o(y,{class:"money"},{default:a((()=>[n(u(_.item.discount),1)])),_:1}),o(y,{class:"money-sm"},{default:a((()=>[n(" % OFF")])),_:1})])),_:1})),o(r,{class:"coupon-title"},{default:a((()=>[n("— "+u(_.item.title)+" —",1)])),_:1}),_.item.expire_at?(s(),l(r,{key:2,class:"time"},{default:a((()=>[n("有效期："),o(y),n(u(_.item.expire_at),1)])),_:1})):(s(),l(r,{key:3,class:"time"},{default:a((()=>[n("有效期："),o(y),n(u(_.item.expire_days)+" 天",1)])),_:1}))])),_:1}),o(r,{class:"split-line"}),o(r,{class:i(["tip",{fullWidth:_.fullWidth}])},{default:a((()=>[o(r,{class:"conditions"},{default:a((()=>[0==_.item.min_use_money?(s(),l(y,{key:0},{default:a((()=>[n("任意金额")])),_:1})):(s(),l(y,{key:1},{default:a((()=>[n("满 "+u(_.item.min_use_money)+" 元",1)])),_:1})),o(y,null,{default:a((()=>[n("\\n可用")])),_:1})])),_:1}),"fetch"==_.type?(s(),l(r,{key:0,class:i(["usenow","usenow-color-"+k.value]),onClick:c(v)},{default:a((()=>[n(u(0==k.value?"已 领 完":"立即领取"),1)])),_:1},8,["class","onClick"])):"my"==_.type?(s(),l(r,{key:1,class:i(["usenow","usenow-color-1"]),onClick:g},{default:a((()=>[n("立即使用")])),_:1})):"select"==_.type?(s(),l(r,{key:2,class:i(["usenow","usenow-color-1"]),onClick:x},{default:a((()=>[n("选择使用")])),_:1})):f("",!0)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1},8,["class","style"])}}},[["__scopeId","data-v-43f60201"]]);export{y as _};

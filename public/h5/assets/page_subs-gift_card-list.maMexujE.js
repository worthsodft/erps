import{e as t,o as e,c as a,w as l,b as s,f as u,t as i,a as n,F as o,l as _,h as m,g as f,j as d,r}from"./index-C-ZICx1j.js";import{_ as c}from"./uni-load-more.CciThZeK.js";import{r as p,a as y}from"./uni-app.es.Cs0vIm-F.js";import{_ as g}from"./uni-tag.BzGXanPq.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=v({__name:"v-gift-card-item",props:{item:Object},setup:d=>(r,c)=>{const y=m,v=f,x=p(t("uni-tag"),g);return e(),a(v,{class:"money-log-item"},{default:l((()=>[s(v,{class:"info"},{default:l((()=>[s(v,{class:"info-item"},{default:l((()=>[u("卡号："),s(y,null,{default:l((()=>[u(i(d.item.sn),1)])),_:1})])),_:1}),0==d.item.use_type?(e(),n(o,{key:0},[s(v,{class:"info-item"},{default:l((()=>[u("面值金额："),s(y,null,{default:l((()=>[u("￥"+i(d.item.init),1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("剩余金额："),s(y,null,{default:l((()=>[u("￥"+i(d.item.has),1)])),_:1})])),_:1})],64)):1==d.item.use_type?(e(),n(o,{key:1},[s(v,{class:"info-item"},{default:l((()=>[u("面值次数："),s(y,null,{default:l((()=>[u(i(d.item.init)+" 次",1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("剩余次数："),s(y,null,{default:l((()=>[u(i(d.item.has)+" 次",1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("计次商品："),s(y,null,{default:l((()=>[u(i(d.item.take_goods_sn_txt),1)])),_:1})])),_:1})],64)):_("",!0),s(v,{class:"info-item"},{default:l((()=>[u("上次使用："),s(y,null,{default:l((()=>[u(i(d.item.last_use_at),1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("绑定日期："),s(y,null,{default:l((()=>[u(i(d.item.bound_at),1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("有效期至："),s(y,null,{default:l((()=>[u(i(d.item.useful_expire_at),1)])),_:1})])),_:1}),s(v,{class:"log-type"},{default:l((()=>[0==d.item.use_type?(e(),a(x,{key:0,text:d.item.use_type_txt,type:"primary"},null,8,["text"])):1==d.item.use_type?(e(),a(x,{key:1,text:d.item.use_type_txt,type:"success"},null,8,["text"])):(e(),a(x,{key:2,text:"未知",type:"disabled"}))])),_:1})])),_:1})])),_:1})}},[["__scopeId","data-v-6bb0c32b"]]),k=v({__name:"list",setup(u){const i=d([]),_=d("more");let m=1,g=0;async function v(){if("more"!=_.value)return;_.value="loading";const t=await uni.$http.get("v1/getMyGiftCardPageData?page="+m);if(1!=t.code)return uni.$tool.tip(t.info||"系统错误");let e=t.data.pageData;0!=e.data.length?(i.value=[...i.value,...e.data],g=e.total,i.value.length>=g?_.value="nomore":(_.value="more",m++)):_.value="nomore"}return v(),y((()=>{v()})),(u,m)=>{const d=f,y=p(t("uni-load-more"),c);return e(),n(o,null,[s(d,{class:"container-v gift_card_list"},{default:l((()=>[(e(!0),n(o,null,r(i.value,((t,l)=>(e(),a(x,{key:t.id,item:t},null,8,["item"])))),128))])),_:1}),s(y,{status:_.value,onClick:v},null,8,["status"])],64)}}},[["__scopeId","data-v-c080967d"]]);export{k as default};

import{_ as e}from"./uni-section.DISfxe6Z.js";import{j as a,e as l,c as t,w as s,g as u,o,a as i,b as r,f as d,t as _,F as n,l as c,r as f,O as m,h as v}from"./index-C-ZICx1j.js";import{d as p,r as g}from"./uni-app.es.Cs0vIm-F.js";import{_ as b}from"./v-button-w80.CPT3DQc0.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=k({__name:"order_finish_index",setup(k){const y=a(uni.$enum),h=a({});let x="";p((e=>{if(x=e.sn||"",!x)return uni.$tool.tip("订单编号不存在",!0,(()=>uni.$tool.navto("/page_subs/manager/order_finish/order_finish_welcome")));uni.$http.post(`v1/getOrderDetailForFinish/${x}`).then((e=>{h.value=e.data.order}))}));const $=uni.$tool.throttle((()=>{uni.$tool.confirm("确定要核销吗？",(()=>{!async function(){uni.$tool.showLoading();const e=await uni.$http.post("v1/finishOrder/"+x);if(uni.$tool.hideLoading(),1!=e.code)return uni.$tool.tip(e.info||"系统错误");uni.$tool.alert(e.info||"操作成功",(()=>{h.value=e.data.order}))}()}))}));return(a,p)=>{const k=g(l("uni-section"),e),x=u,F=v,w=g(l("v-button-w80"),b);return o(),t(x,{class:"container-v order-finish-index"},{default:s((()=>[h.value.station_title?(o(),i(n,{key:0},[r(k,{type:"line",titleFontSize:"32rpx",title:"水站信息"}),r(x,{class:"order-group"},{default:s((()=>[r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("水站名称")])),_:1}),r(x,{class:"item-value color-green v-bold"},{default:s((()=>[d(_(h.value.station_title),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("水站联系人")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.station_link_name),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("水站电话")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.station_link_phone),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("水站地址")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.station_address),1)])),_:1})])),_:1})])),_:1})],64)):c("",!0),h.value.take_name?(o(),i(n,{key:1},[r(k,{type:"line",titleFontSize:"32rpx",title:"收货信息"}),r(x,{class:"order-group"},{default:s((()=>[r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("收货人")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.take_name),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("收货电话")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.take_phone),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("收货地址")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.take_address),1)])),_:1})])),_:1})])),_:1})],64)):c("",!0),r(k,{type:"line",titleFontSize:"32rpx",title:"订单信息"}),h.value.id?(o(),t(x,{key:2,class:"order-group"},{default:s((()=>[r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("订单编号")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.sn),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("商品金额")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.goods_amount),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("优惠金额")])),_:1}),r(x,{class:"item-value color-red"},{default:s((()=>[d("-"+_(h.value.discount_amount||"0.00"),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("商品实付")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.real_amount||"0.00"),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("运费金额")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.deliver_fee||"0.00"),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("支付方式")])),_:1}),r(x,{class:"item-value"},{default:s((()=>[d(_(h.value.pay_type_txt),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("优惠券")])),_:1}),r(x,{class:"item-value"},{default:s((()=>{var e;return[d(_((null==(e=h.value.coupon)?void 0:e.title)||""),1)]})),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("取货方式")])),_:1}),r(x,{class:"item-value color-red"},{default:s((()=>[d(_(h.value.take_type_txt),1)])),_:1})])),_:1}),r(x,{class:"order-group-item"},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d("订单状态")])),_:1}),r(x,{class:"item-value color-green"},{default:s((()=>[1==h.value.status?(o(),t(F,{key:0,class:"v-tag"},{default:s((()=>[d(_(h.value.status_txt),1)])),_:1})):(o(),t(F,{key:1,class:"v-tag v-tag-black"},{default:s((()=>[d(_(h.value.status_txt),1)])),_:1}))])),_:1})])),_:1})])),_:1})):(o(),t(x,{key:3,class:"order-group"},{default:s((()=>[r(x,{class:"color-desc"},{default:s((()=>[d("订单不存在")])),_:1})])),_:1})),r(k,{type:"line",titleFontSize:"32rpx",title:"订单明细"}),r(x,{class:"order-group"},{default:s((()=>[(o(!0),i(n,null,f(h.value.subs,((e,a)=>(o(),t(x,{class:"order-group-item",key:a},{default:s((()=>[r(x,{class:"item-label"},{default:s((()=>[d(_(e.goods_name),1)])),_:2},1024),r(x,{class:"item-value"},{default:s((()=>[d(_(e.goods_number)+" ("+_(e.goods_unit)+") × "+_(e.goods_self_price)+" = "+_(e.goods_amount),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),h.value.remark?(o(),i(n,{key:4},[r(k,{type:"line",titleFontSize:"32rpx",title:"订单备注"}),r(x,{class:"color-desc"},{default:s((()=>[d(_(h.value.remark),1)])),_:1})],64)):c("",!0),r(x,null,{default:s((()=>[h.value.status==y.value.order.STATUS_DELIVERING?(o(),t(w,{key:0,onAction:m($),title:"确认核销"},null,8,["onAction"])):(o(),t(w,{key:1,disabled:"",title:"确认核销"}))])),_:1})])),_:1})}}},[["__scopeId","data-v-74a718a3"]]);export{y as default};

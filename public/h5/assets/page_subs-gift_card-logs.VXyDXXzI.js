import{e,o as t,c as a,w as l,b as s,f as u,t as i,a as o,F as n,l as _,h as m,g as d,j as r,r as f}from"./index-C-ZICx1j.js";import{_ as c}from"./uni-load-more.CciThZeK.js";import{r as p,a as y}from"./uni-app.es.Cs0vIm-F.js";import{_ as g}from"./uni-tag.BzGXanPq.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=v({__name:"v-gift-card-log-item",props:{item:Object},setup:r=>(f,c)=>{const y=m,v=d,x=p(e("uni-tag"),g);return t(),a(v,{class:"money-log-item"},{default:l((()=>[s(v,{class:"info"},{default:l((()=>[s(v,{class:"info-item"},{default:l((()=>[u("卡号："),s(y,null,{default:l((()=>[u(i(r.item.card_sn),1)])),_:1})])),_:1}),0==r.item.use_type?(t(),o(n,{key:0},[s(v,{class:"info-item"},{default:l((()=>[u("消费金额："),s(y,{class:"color-red"},{default:l((()=>[u("￥"+i(r.item.delta),1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("剩余金额："),s(y,null,{default:l((()=>[u("￥"+i(r.item.has),1)])),_:1})])),_:1})],64)):1==r.item.use_type?(t(),o(n,{key:1},[s(v,{class:"info-item"},{default:l((()=>[u("消费次数："),s(y,{class:"color-red"},{default:l((()=>[u(i(r.item.delta)+" 次",1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("剩余次数："),s(y,null,{default:l((()=>[u(i(r.item.has)+" 次",1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("计次商品："),s(y,null,{default:l((()=>[u(i(r.item.take_goods_sn_txt),1)])),_:1})])),_:1})],64)):_("",!0),r.item.order_sn?(t(),a(v,{key:2,class:"info-item"},{default:l((()=>[u("订单编号："),s(y,null,{default:l((()=>[u(i(r.item.order_sn),1)])),_:1})])),_:1})):_("",!0),s(v,{class:"info-item"},{default:l((()=>[u("消费日期："),s(y,null,{default:l((()=>[u(i(r.item.create_at),1)])),_:1})])),_:1}),s(v,{class:"info-item"},{default:l((()=>[u("核销人："),s(y,null,{default:l((()=>[u(i(r.item.consume_openid_txt),1)])),_:1})])),_:1}),s(v,{class:"log-type"},{default:l((()=>[0==r.item.use_type?(t(),a(x,{key:0,text:r.item.use_type_txt,type:"primary"},null,8,["text"])):1==r.item.use_type?(t(),a(x,{key:1,text:r.item.use_type_txt,type:"success"},null,8,["text"])):(t(),a(x,{key:2,text:"未知",type:"disabled"}))])),_:1})])),_:1})])),_:1})}},[["__scopeId","data-v-82de7568"]]),k=v({__name:"logs",setup(u){const i=r([]),_=r("more");let m=1,g=0;async function v(){if("more"!=_.value)return;_.value="loading";const e=await uni.$http.get("v1/getMyGiftCardLogPageData?page="+m);if(1!=e.code)return uni.$tool.tip(e.info||"系统错误");let t=e.data.pageData;0!=t.data.length?(i.value=[...i.value,...t.data],g=t.total,i.value.length>=g?_.value="nomore":(_.value="more",m++)):_.value="nomore"}return v(),y((()=>{v()})),(u,m)=>{const r=d,y=p(e("uni-load-more"),c);return t(),o(n,null,[s(r,{class:"container-v gift_card_list"},{default:l((()=>[(t(!0),o(n,null,f(i.value,((e,l)=>(t(),a(x,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),s(y,{status:_.value,onClick:v},null,8,["status"])],64)}}},[["__scopeId","data-v-e9a6ab6e"]]);export{k as default};

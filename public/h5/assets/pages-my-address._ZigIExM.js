import{j as t,e,o as s,c as a,w as n,b as i,f as o,t as l,l as r,n as d,g as u,h as c,a as m,r as f,F as p}from"./index-C-ZICx1j.js";import{_}from"./uni-tag.BzGXanPq.js";import{r as v,d as g}from"./uni-app.es.Cs0vIm-F.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as b}from"./uni-load-more.CciThZeK.js";import{_ as j}from"./v-button-w80.CPT3DQc0.js";const k=y({__name:"v-address-edit",props:{item:Object,index:[String,Number],source:String},emits:["delItem"],setup(m,{emit:f}){const p=m,g=p.item.province+", "+p.item.city+", "+p.item.district+", "+p.item.street,y=t(g),b=f;function j(){b("delItem",p.index)}function k(){uni.$tool.navto("/pages/order/confirm?agid="+p.item.gid)}function x(){uni.$tool.navto("/pages/my/address-edit?gid="+p.item.gid)}return(t,f)=>{const p=u,g=v(e("uni-tag"),_),b=c;return s(),a(p,{class:"cart-item"},{default:n((()=>[i(p,{class:"info"},{default:n((()=>[i(p,{class:"info-item"},{default:n((()=>[o(l(y.value),1)])),_:1}),i(p,{class:"info-item"},{default:n((()=>[o(l(m.item.detail),1)])),_:1}),i(p,{class:"operate"},{default:n((()=>[1==m.item.is_default?(s(),a(g,{key:0,type:"warning",text:"默认"})):(s(),a(p,{key:1})),i(p,{class:"btns"},{default:n((()=>["order"==m.source?(s(),a(p,{key:0,class:"btn-sm btn-red v-mr-20",onClick:k},{default:n((()=>[o("选 择")])),_:1})):r("",!0),i(p,{class:"btn-sm btn-green2",onClick:x},{default:n((()=>[o("编 辑")])),_:1})])),_:1})])),_:1})])),_:1}),i(p,{class:"del-item",onClick:d(j,["stop"])},{default:n((()=>[i(b,null,{default:n((()=>[o("删除")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ac46401d"]]),x=y({__name:"address",setup(o){const l=t([]);t("more");const d=t("");function c(){uni.$tool.navto("/pages/my/my")}function _(){uni.$tool.navto("/pages/my/address-edit")}function y(t){uni.$tool.confirm("确认要删除此地址吗？",(async()=>{let e=l.value[t].gid;1==(await uni.$http.post("v1/delAddress/"+e)).code&&l.value.splice(t,1)}))}return g((t=>{d.value=t.source||"",async function(){const t=await uni.$http.get("v1/getAddressList");l.value=t.data.list}()})),(t,o)=>{const g=v(e("v-address-edit"),k),x=v(e("uni-load-more"),b),$=v(e("v-button-w80"),j),w=u;return s(),a(w,{class:"container-v main"},{default:n((()=>[(s(!0),m(p,null,f(l.value,((t,e)=>(s(),a(g,{key:t.id,item:t,index:e,onDelItem:y,source:d.value},null,8,["item","index","source"])))),128)),l.value.length<1?(s(),a(x,{key:0,status:"nomore"})):r("",!0),i($,{onAction:_,title:"添加地址"}),i($,{onAction:c,type:"normal",title:"返回我的"})])),_:1})}}},[["__scopeId","data-v-e78813c7"]]);export{x as default};

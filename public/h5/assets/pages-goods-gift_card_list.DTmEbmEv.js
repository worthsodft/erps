import{j as a,s as t,q as e,e as o,a as s,b as l,w as r,F as u,g as n,o as i,r as m,c as d}from"./index-C-ZICx1j.js";import{_ as v}from"./v-goods-item2.abZTj9bm.js";import{o as p,a as c,b as f,c as g,r as _}from"./uni-app.es.Cs0vIm-F.js";import{_ as j}from"./uni-load-more.CciThZeK.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./v-number-box.BkpsK1Er.js";const h=b({__name:"gift_card_list",setup(b){const h=a([]),x=a("more");let D=1,y=0;async function k(){if("more"!=x.value)return;x.value="loading";const a=await uni.$http.get("v1/getGiftCardGoodsPageData?page="+D);if(1!=a.code)return uni.$tool.tip(a.info||"系统错误");let t=a.data.pageData;0!=t.data.length?(h.value=[...h.value,...t.data],y=t.total,h.value.length>=y?x.value="nomore":(x.value="more",D++)):x.value="nomore"}function w(){h.value=[],x.value="more",D=1,y=0}return p((()=>{w(),k()})),c((()=>{k()})),f((()=>{w(),k(),setTimeout((()=>{t()}),200)})),g((()=>e().globalData.shareData)),(a,t)=>{const e=_(o("v-goods-item2"),v),p=n,c=_(o("uni-load-more"),j);return i(),s(u,null,[l(p,{class:"container-v list"},{default:r((()=>[(i(!0),s(u,null,m(h.value,((a,t)=>(i(),d(e,{key:a.id,item:a},null,8,["item"])))),128))])),_:1}),l(c,{status:x.value,onClick:k},null,8,["status"])],64)}}},[["__scopeId","data-v-6626db5d"]]);export{h as default};

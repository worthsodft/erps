import{_ as a}from"./v-line-title.1Z0PsPEC.js";import{j as e,e as t,c as l,w as s,g as n,o,b as i,f as u,t as r,a as c,r as d,F as f,l as v,h as m,z as p,x as _}from"./index-Bk6Bf557.js";import{r as g}from"./uni-app.es.VV1Xt59_.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const h=y({__name:"recharge",setup(y){const h=e([]),k=e([]),$=e(0),j=e(0);function x(){uni.$api.getUserInfo((a=>{$.value=a.data.userInfo.money,a.data.userInfo.money_expire_at,uni.$login.updateTokenCache(a.data)}))}function I(){uni.$tool.navto("/pages/pay/money-log")}function C(){uni.$login.judgePhone((()=>{!async function(){let a=h.value[j.value];if(!a.gid)return uni.$tool.tip("充值项目不存在");const e=await uni.$api.getPayInfo("recharge",a.gid);if(1!=e.code)return uni.$tool.tip(e.info||"系统错误");uni.$tool.payment(e.data.payInfo,(()=>{x()}))}()}))}return uni.$http.get("v1/rechargeWayList").then((a=>{h.value=a.data.list,k.value=a.data.remarkList})),x(),(e,y)=>{const x=g(t("v-line-title"),a),w=m,b=n,L=p;return o(),l(b,{class:"container-v main"},{default:s((()=>[i(b,{class:"container-h v-mb-20"},{default:s((()=>[i(x,{title:"当前余额："}),i(w,{class:"color-desc v-ml-10"},{default:s((()=>[u("￥"+r($.value),1)])),_:1})])),_:1}),i(x,{title:"充值金额"}),i(b,{class:"way-list v-mt-20"},{default:s((()=>[(o(!0),c(f,null,d(h.value,((a,e)=>(o(),l(b,{class:_(["way-item",{curr:j.value==e}]),onClick:a=>j.value=e,key:a.id},{default:s((()=>[i(b,{class:""},{default:s((()=>[u("充 "+r(a.money)+" 元",1)])),_:2},1024),i(b,{class:"give"},{default:s((()=>[u("赠送 "+r(a.give_money)+" 元",1)])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),k.value.length>0?(o(),c(f,{key:0},[i(x,{title:"充值说明"}),i(b,{class:"v-mt-20"},{default:s((()=>[(o(!0),c(f,null,d(k.value,((a,e)=>(o(),l(b,{class:"v-ml-20 color-desc",key:e},{default:s((()=>[u(r(e+1)+". "+r(a),1)])),_:2},1024)))),128))])),_:1})],64)):v("",!0),i(b,{class:"v-mt-50 v-text-right"},{default:s((()=>[i(L,{onClick:C,type:"primary",style:{"background-color":"#5aa1d8",color:"#fff"}},{default:s((()=>[u("确定充值")])),_:1}),i(b,{class:"color-green v-mt-10",onClick:I},{default:s((()=>[u("查看余额记录")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-2d735c00"]]);export{h as default};

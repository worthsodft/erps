import{j as e,e as a,c as t,w as l,g as i,o as s,b as u,f as n,O as o,P as d,Q as r}from"./index-Bk6Bf557.js";import{_ as c}from"./v-address-picker.BuqTqE1v.js";import{d as m,r as p}from"./uni-app.es.VV1Xt59_.js";import{_ as v}from"./uni-easyinput.BtlkLOzv.js";import{_ as f}from"./v-button-w80.Dzzs-jpy.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-load-more.ZwF_zjD4.js";import"./uni-icons.JjreYIGb.js";import"./uni-cloud.es.B9Nqdegf.js";const h=_({__name:"address-edit",setup(_){let h="";const g=e({gid:"",district:"",detail:"",link_name:"",link_phone:"",is_default:0}),k=e([]);m((e=>{e.gid&&(h=e.gid,async function(){const e=await uni.$http.get("v1/getAddressDetail/"+h);g.value=e.data.address,g.value.district=e.data.address.district}()),$()}));const $=async()=>{const e=await uni.$http.get("v1/getCities");k.value=e.data.cities};function y(e){g.value.district=e[0].value}const j=uni.$tool.throttle((async()=>{if(!(g.value.district?g.value.detail?g.value.link_name?g.value.link_phone?uni.$tool.isPhone(g.value.link_phone)||uni.$tool.tip("电话号码格式错误"):uni.$tool.tip("请输入联系电话"):uni.$tool.tip("请输入联系人"):uni.$tool.tip("请输入详细地址"):uni.$tool.tip("请选择区域")))return;const e=await uni.$http.post("v1/saveAddress",g.value);uni.$tool.tip(e.info,!0,(()=>{uni.$tool.navto("/pages/my/address")})),console.log(e)}));function b({detail:e}){g.value.is_default=e.value?1:0}return(e,m)=>{const _=i,h=p(a("v-address-picker"),c),$=p(a("uni-easyinput"),v),V=d,x=p(a("v-button-w80"),f),w=r;return s(),t(_,{class:"container-v main"},{default:l((()=>[u(w,null,{default:l((()=>[u(_,{class:"form-item"},{default:l((()=>[u(_,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("选择区域:")])),_:1}),u(h,{cities:k.value,onChange:y,value:g.value.district},null,8,["cities","value"])])),_:1}),u(_,{class:"form-item"},{default:l((()=>[u(_,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("详细地址:")])),_:1}),u($,{type:"textarea",maxlength:"200",autoHeight:"",modelValue:g.value.detail,"onUpdate:modelValue":m[0]||(m[0]=e=>g.value.detail=e),placeholder:"请输入详细地址"},null,8,["modelValue"])])),_:1}),u(_,{class:"form-item"},{default:l((()=>[u(_,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("联系人:")])),_:1}),u($,{autoHeight:"",maxlength:"20",modelValue:g.value.link_name,"onUpdate:modelValue":m[1]||(m[1]=e=>g.value.link_name=e),placeholder:"请输入联系人姓名"},null,8,["modelValue"])])),_:1}),u(_,{class:"form-item"},{default:l((()=>[u(_,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("联系电话:")])),_:1}),u($,{autoHeight:"",type:"number",maxlength:"20",modelValue:g.value.link_phone,"onUpdate:modelValue":m[2]||(m[2]=e=>g.value.link_phone=e),placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1}),u(_,{class:"form-item"},{default:l((()=>[u(_,{class:"uni-h6 v-mb-10"},{default:l((()=>[n("是否默认: "),u(_,{style:{"font-size":"24rpx",display:"inline"}},{default:l((()=>[u(V,{checked:1==g.value.is_default,onChange:b,color:"#2979ff",style:{transform:"scale(0.5)"}},null,8,["checked"])])),_:1})])),_:1})])),_:1}),u(x,{onAction:o(j),title:"提交保存"},null,8,["onAction"])])),_:1})])),_:1})}}},[["__scopeId","data-v-0707ca09"]]);export{h as default};

import{e,o as t,c as a,w as l,b as o,f as n,x as i,t as s,g as u,h as c,j as d,a as r,F as p,r as f,l as m,z as v,O as _,P as y,Q as g,u as k,V as h,W as b,C as $,i as x}from"./index-Bk6Bf557.js";import{_ as C,a as w}from"./uni-data-checkbox.-x2ASnHf.js";import{r as V,d as j}from"./uni-app.es.VV1Xt59_.js";import{_ as A}from"./uni-icons.JjreYIGb.js";import{_ as I,a as S,b as T}from"./v-order-confirm-bar2.DzSZGKCc.js";import{_ as L}from"./uni-easyinput.BtlkLOzv.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as O}from"./v-coupon-item.BWYOAxw1.js";import{_ as P}from"./uni-tag.D3Mbrrw_.js";import{_ as R}from"./v-button-w80.Dzzs-jpy.js";import{_ as D}from"./v-address-picker.BuqTqE1v.js";import"./uni-cloud.es.B9Nqdegf.js";import"./uni-load-more.ZwF_zjD4.js";const F=E({__name:"v-pay-type-gift-card",props:{index:Number,card:Object},emits:["action"],setup(d,{emit:r}){const p=r;return(r,f)=>{const m=V(e("uni-icons"),A),v=u,_=c;return t(),a(v,{class:i(["gift-card-item",{"color-green":d.card.checked}]),onClick:f[0]||(f[0]=e=>{return t=d.index,void p("action",t);var t})},{default:l((()=>[o(v,{class:"select-item-icon"},{default:l((()=>[d.card.checked?(t(),a(m,{key:0,type:"checkbox-filled",color:"#5aa1d8",size:"24"})):(t(),a(m,{key:1,type:"checkbox",color:"#999",size:"24"}))])),_:1}),o(v,{class:"item-line"},{default:l((()=>[n("余额："),o(_,{class:i(d.card.checked?"color-green":"color-desc")},{default:l((()=>[n(s(d.card.has||""),1)])),_:1},8,["class"])])),_:1}),o(v,{class:"item-line"},{default:l((()=>[n("有效期："),o(_,{class:i(d.card.checked?"color-green":"color-desc")},{default:l((()=>[n(s(d.card.useful_expire_at||""),1)])),_:1},8,["class"])])),_:1}),o(v,{class:"select-item-icon"},{default:l((()=>[o(m,{type:"right",color:"#fff"})])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-995f2c17"]]),U=E({__name:"v-pay-type-select",props:{list:Object},emits:["select","reset","useGiftCard"],setup(i,{expose:v,emit:_}){const y=d(0),g=d(),k=d([]),h=_,b=d(!1);function $(e){k.value[e].checked=!k.value[e].checked,b.value=function(){let e=!1;for(let t=0,a=k.value.length;t<a;t++)if(k.value[t].checked){e=!0;break}return e}()}return uni.$api.getUserInfo((e=>{y.value=e.data.userInfo.money})),uni.$http.get("v1/getMyUsableGiftCardList").then((e=>{k.value=e.data.giftCardList})),v({open:function(){g.value.open("bottom")},close:function(){g.value.close()}}),(d,v)=>{const _=u,x=V(e("v-pay-type-gift-card"),F),w=c,j=V(e("uni-icons"),A),I=V(e("uni-popup"),C);return t(),a(_,null,{default:l((()=>[o(I,{ref_key:"popup",ref:g,"background-color":"#fff"},{default:l((()=>[o(_,{class:"popup-main"},{default:l((()=>[o(_,{class:"popup-main-title"},{default:l((()=>[n("选择支付方式")])),_:1}),o(_,{class:"popup-main-list"},{default:l((()=>[(t(!0),r(p,null,f(i.list,((e,i)=>(t(),r(p,{key:e.id},["giftcard"==i?(t(),a(_,{key:0,class:"select-item-column"},{default:l((()=>[o(_,{class:"select-item-title"},{default:l((()=>[n(s(e),1)])),_:2},1024),k.value.length>0?(t(),a(_,{key:0,class:"v-mt-20 v-w100"},{default:l((()=>[(t(!0),r(p,null,f(k.value,((e,l)=>(t(),a(x,{key:e.sn,card:e,index:l,onAction:$},null,8,["card","index"])))),128)),b.value?(t(),a(_,{key:0,class:"btn-sm btn-green",onClick:e=>function(e){let t=[],a=0;for(let l=0,o=k.value.length;l<o;l++){let e=k.value[l];e.checked&&(a+=+e.has,t.push(e.sn))}h("select",{payType:e,selectedSn:t,cardHasMoney:a})}(i)},{default:l((()=>[n("确认使用")])),_:2},1032,["onClick"])):(t(),a(_,{key:1,class:"btn-sm btn-disable"},{default:l((()=>[n("确认使用")])),_:1}))])),_:2},1024)):(t(),a(_,{key:1,class:"color-desc v-ml-20 v-font-s20"},{default:l((()=>[n("暂无实物卡")])),_:1}))])),_:2},1024)):(t(),a(_,{key:1,class:"select-item",onClick:e=>function(e){for(let t=0,a=k.value.length;t<a;t++)k.value[t].checked&&(k.value[t].checked=!1);b.value=!1,h("select",{payType:e})}(i)},{default:l((()=>[o(_,{class:"select-item-title"},{default:l((()=>[n(s(e)+" ",1),"yue"==i?(t(),a(w,{key:0,class:"color-desc v-ml-20"},{default:l((()=>[n("￥"+s(y.value),1)])),_:1})):m("",!0)])),_:2},1024),o(_,{class:"select-item-icon"},{default:l((()=>[o(j,{type:"right",color:"#999"})])),_:1})])),_:2},1032,["onClick"]))],64)))),128))])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-c79e5f4b"]]),H=E({__name:"v-coupon-select",props:{list:Array},emits:["select","reset"],setup(i,{expose:s,emit:c}){const m=d(),_=c;function y(e){_("select",e)}function g(e){_("reset")}function k(e){}return s({open:function(){m.value.open("bottom")},close:function(){m.value.close()}}),(s,c)=>{const d=u,_=V(e("v-coupon-item"),O),h=v,b=V(e("uni-popup"),C);return t(),a(d,null,{default:l((()=>[o(b,{ref_key:"couponPopup",ref:m,"background-color":"#fff",onChange:k},{default:l((()=>[o(d,{class:"coupon-popup-main"},{default:l((()=>[o(d,{class:"coupon-popup-main-title"},{default:l((()=>[n("选择优惠券")])),_:1}),o(d,{class:"coupon-popup-main-list"},{default:l((()=>[(t(!0),r(p,null,f(i.list,((e,l)=>(t(),a(_,{key:e.id,item:e,onSelect:y,type:"select",mb:"",fullWidth:""},null,8,["item"])))),128)),o(h,{onClick:g,style:{"background-color":"#f3a73f",color:"#fff",height:"60rpx","line-height":"60rpx","font-size":"30rpx"}},{default:l((()=>[n("不使用")])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-53c9a0a1"]]),z=E({__name:"v-station-item",props:{item:Object},emits:["action"],setup(i,{emit:d}){const r=i,p=d;function f(){if(1!=r.item.is_open)return uni.$tool.tip("当前水站已暂停营业",!1,null,3);p("action",r.item)}return(d,r)=>{const p=c,v=u,_=V(e("uni-icons"),A);return t(),a(v,{class:"select-item",onClick:f},{default:l((()=>[o(v,{class:"select-item-left"},{default:l((()=>[o(v,{class:"row"},{default:l((()=>[n("名称： "),o(p,{class:"value"},{default:l((()=>[1!=i.item.is_open?(t(),a(p,{key:0,class:"not-open"},{default:l((()=>[n("(暂停营业)")])),_:1})):m("",!0),n(s(i.item.title),1)])),_:1})])),_:1}),i.item.detail?(t(),a(v,{key:0,class:"row"},{default:l((()=>[n("地址："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.province?i.item.province+", ":"")+s(i.item.city?i.item.city+", ":"")+" "+s(i.item.district?i.item.district+", ":"")+" "+s(i.item.street?i.item.street+", ":"")+" "+s(i.item.detail),1)])),_:1})])),_:1})):m("",!0),o(v,{class:"row"},{default:l((()=>[i.item.link_name?(t(),a(p,{key:0,class:"v-mr-20"},{default:l((()=>[n("联系人："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.link_name),1)])),_:1})])),_:1})):m("",!0),i.item.link_phone?(t(),a(p,{key:1},{default:l((()=>[n("电话："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.link_phone),1)])),_:1})])),_:1})):m("",!0)])),_:1}),i.item.open_time?(t(),a(v,{key:1,class:"row"},{default:l((()=>[n("营业时间："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.open_time),1)])),_:1})])),_:1})):m("",!0),i.item.remark?(t(),a(v,{key:2,class:"row"},{default:l((()=>[n("其他说明："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.remark),1)])),_:1})])),_:1})):m("",!0),i.item.distance?(t(),a(v,{key:3,class:"row"},{default:l((()=>[n("距离我："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.distance)+" 米",1)])),_:1})])),_:1})):m("",!0)])),_:1}),o(_,{type:"right",color:"#999999"})])),_:1})}}},[["__scopeId","data-v-9ea82f6e"]]),q=E({__name:"v-station-select",props:{list:Array},emits:["select"],setup(i,{expose:s,emit:c}){const m=d(),v=c,_=()=>{uni.$tool.tip("水站地图功能开发中，敬请期待...",!1,null,3)};function y(e){}return s({open:function(){m.value.open("bottom")},close:function(){m.value.close()}}),(s,c)=>{const d=V(e("uni-icons"),A),g=u,k=V(e("v-station-item"),z),h=V(e("uni-popup"),C);return t(),a(g,null,{default:l((()=>[o(h,{ref_key:"itemPopup",ref:m,"background-color":"#fff",onChange:y},{default:l((()=>[o(g,{class:"item-popup-main"},{default:l((()=>[o(g,{class:"item-popup-main-title"},{default:l((()=>[n("选择水站 "),o(g,{class:"station-map"},{default:l((()=>[o(g,{class:"map-tag",onClick:_},{default:l((()=>[o(d,{type:"location",color:"#5aa1d8"}),n("地图模式 ")])),_:1})])),_:1})])),_:1}),o(g,{class:"item-popup-main-list"},{default:l((()=>[(t(!0),r(p,null,f(i.list,((e,l)=>(t(),a(k,{key:e.id,item:e,onAction:t=>function(e){v("select",e)}(e)},null,8,["item","onAction"])))),128))])),_:1})])),_:1})])),_:1},512)])),_:1})}}},[["__scopeId","data-v-892be48e"]]),K=E({__name:"v-address-item",props:{item:Object},emits:["action"],setup(i,{emit:d}){const r=i,p=d;function f(){p("action",r.item.value)}return(d,r)=>{const p=c,v=u,_=V(e("uni-tag"),P),y=V(e("uni-icons"),A);return t(),a(v,{class:"select-item",onClick:f},{default:l((()=>[o(v,{class:"select-item-left"},{default:l((()=>[o(v,{class:"row"},{default:l((()=>[n("地址："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.province?i.item.province+", ":"")+s(i.item.city?i.item.city+", ":"")+" "+s(i.item.district?i.item.district+", ":"")+" "+s(i.item.street?i.item.street+", ":"")+" "+s(i.item.detail),1)])),_:1})])),_:1}),o(v,{class:"row"},{default:l((()=>[n("联系人："),o(p,{class:"value v-mr-20"},{default:l((()=>[n(s(i.item.link_name),1)])),_:1}),n(" 电话："),o(p,{class:"value"},{default:l((()=>[n(s(i.item.link_phone),1)])),_:1})])),_:1}),i.item.is_default?(t(),a(v,{key:0,class:"row v-mt-10"},{default:l((()=>[o(_,{text:"默 认",type:"primary",size:"mini"})])),_:1})):m("",!0)])),_:1}),o(y,{type:"right",color:"#999999"})])),_:1})}}},[["__scopeId","data-v-a3c0b001"]]),M=E({__name:"v-address-form",emits:["saveSuccess"],setup(i,{expose:s,emit:c}){let r="";const p={gid:"",district:"",detail:"",link_name:"",link_phone:"",is_default:0},f=d({...p}),m=d([]);j((e=>{e.gid&&(r=e.gid,async function(){const e=await uni.$http.get("v1/getAddressDetail/"+r);f.value=e.data.address}())}));const v=d(),k=c;function h(e){f.value.district=e[0].text}const b=uni.$tool.throttle((async()=>{if(!(f.value.district?f.value.detail?f.value.link_name?f.value.link_phone||uni.$tool.tip("请输入联系电话"):uni.$tool.tip("请输入联系人"):uni.$tool.tip("请输入详细地址"):uni.$tool.tip("请选择区域")))return;const e=await uni.$http.post("v1/saveAddress",f.value);uni.$tool.tip(e.info,!0,(()=>{k("saveSuccess",e.data.item)}))}));function $({detail:e}){f.value.is_default=e.value?1:0}return s({open:function(){v.value.open()},close:function(){v.value.close()},reset:function(){f.value={...p}},getCities:async()=>{const e=await uni.$http.get("v1/getCities");m.value=e.data.cities}}),(i,s)=>{const c=u,d=V(e("v-address-picker"),D),r=V(e("uni-easyinput"),L),p=y,k=V(e("v-button-w80"),R),x=g,w=V(e("uni-popup"),C);return t(),a(w,{ref_key:"addressFormPopup",ref:v,"background-color":"#fff","mask-background-color":"#000000dd"},{default:l((()=>[o(c,{class:"container-v main"},{default:l((()=>[o(x,null,{default:l((()=>[o(c,{class:"form-item"},{default:l((()=>[o(c,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("选择区域:")])),_:1}),o(d,{cities:m.value,onChange:h,modelValue:f.value.district,"onUpdate:modelValue":s[0]||(s[0]=e=>f.value.district=e)},null,8,["cities","modelValue"])])),_:1}),o(c,{class:"form-item"},{default:l((()=>[o(c,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("详细地址:")])),_:1}),o(r,{type:"textarea",maxlength:"200",autoHeight:"",modelValue:f.value.detail,"onUpdate:modelValue":s[1]||(s[1]=e=>f.value.detail=e),placeholder:"请输入详细地址"},null,8,["modelValue"])])),_:1}),o(c,{class:"form-item"},{default:l((()=>[o(c,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("联系人:")])),_:1}),o(r,{autoHeight:"",maxlength:"20",modelValue:f.value.link_name,"onUpdate:modelValue":s[2]||(s[2]=e=>f.value.link_name=e),placeholder:"请输入联系人姓名"},null,8,["modelValue"])])),_:1}),o(c,{class:"form-item"},{default:l((()=>[o(c,{class:"uni-h6 v-mb-10 require"},{default:l((()=>[n("联系电话:")])),_:1}),o(r,{autoHeight:"",type:"number",maxlength:"20",modelValue:f.value.link_phone,"onUpdate:modelValue":s[3]||(s[3]=e=>f.value.link_phone=e),placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1}),o(c,{class:"form-item"},{default:l((()=>[o(c,{class:"uni-h6 v-mb-10"},{default:l((()=>[n("是否默认: "),o(c,{style:{"font-size":"24rpx",display:"inline"}},{default:l((()=>[o(p,{checked:1==f.value.is_default,onChange:$,color:"#2979ff",style:{transform:"scale(0.5)"}},null,8,["checked"])])),_:1})])),_:1})])),_:1}),o(k,{onAction:_(b),title:"提交保存"},null,8,["onAction"])])),_:1})])),_:1})])),_:1},512)}}},[["__scopeId","data-v-5848e253"]]),Y=E({__name:"v-address-select",props:{list:Array},emits:["select","reload"],setup(i,{expose:s,emit:c}){const m=d(),v=d(),_=c;function y(){v.value.getCities(),v.value.reset(),v.value.open()}function g(e){k(e),_("reload"),v.value.close()}function k(e){_("select",e)}function h(e){}return s({open:function(){m.value.open("bottom")},close:function(){m.value.close()}}),(s,c)=>{const d=u,_=V(e("v-address-item"),K),b=V(e("v-button-w80"),R),$=V(e("uni-popup"),C),x=V(e("v-address-form"),M);return t(),a(d,null,{default:l((()=>[o($,{ref_key:"itemPopup",ref:m,"background-color":"#fff",onChange:h},{default:l((()=>[o(d,{class:"item-popup-main"},{default:l((()=>[o(d,{class:"item-popup-main-title"},{default:l((()=>[n("选择收货地址")])),_:1}),o(d,{class:"item-popup-main-list"},{default:l((()=>[(t(!0),r(p,null,f(i.list,((e,l)=>(t(),a(_,{key:e.id,item:e,onAction:t=>k(e)},null,8,["item","onAction"])))),128))])),_:1})])),_:1}),o(b,{onAction:y,title:"添加地址"}),o(d,{style:{weight:"100%",height:"40rpx"}})])),_:1},512),o(x,{ref_key:"addressFormRef",ref:v,onSaveSuccess:g},null,512)])),_:1})}}},[["__scopeId","data-v-dc517a17"]]),N=E({__name:"confirm",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){const v=d(uni.$enum);d("去使用");const y=d();let g=!1;const C=d({}),E=d("");let O=d([]),P={},R=-1,D=k(i,"modelValue");const F=d(),z=d([]),K=d({}),M=d(),N=d([]);let W=d({});const G=d(),B=d([]);let Q=d({}),J=d({}),X=d("");const Z=d();let ee="";j((e=>{uni.$http.post("v1/getInitDataConfirm",P).then((e=>{O.value=e.data.takeTypes})),e.sn?(ee=e.sn,uni.$tool.setNavTitle("订单查看"),uni.$login.judgeLogin((()=>{uni.$tool.showLoading(),uni.$http.post("v1/getOrderDetail/"+ee).then((e=>{uni.$tool.hideLoading(),C.value=e.data.order,D.value=C.value.remark,X.value=C.value.pay_type||"",Q.value=e.data.station,W.value=e.data.address,K.value=e.data.coupon,J.value=e.data.payTypes}))}))):function(e){if(y.value=e.from||"",P={from:e.from||"",goods_sn:e.goods_sn||"",goods_number:e.goods_number||"",address_gid:e.agid||"",station_gid:e.sgid||"",take_type:-1,pay_type:"",gift_card_sns:[]},"goods"==P.from){if(!P.goods_sn||!P.goods_number)return uni.$tool.tip("请输入商品编号和数量")}else if("cart"!=P.from)return uni.$tool.tip("路径参数错误，购物车不存在");uni.$login.judgeLogin((()=>{ae()}))}(e)}));const te=()=>{const e="订单编号："+C.value.sn;b({data:e,success(e){uni.$tool.tip("订单编号已复制")}})};function ae(){uni.$tool.showLoading(),uni.$http.post("v1/getOrderConfirmInfoV2",P).then((e=>{uni.$tool.hideLoading(),g=!1,C.value=e.data.orderInfo,E.value=e.data.freeDeliverTxt,e.data.address&&(W.value=e.data.address,P.address_gid=W.value.gid),e.data.station&&(Q.value=e.data.station,P.station_gid=Q.value.gid),z.value=e.data.couponList,e.data.coupon?(K.value=e.data.coupon,P.coupon_gid=K.value.gid):K.value={},J.value=e.data.payTypes})).catch((e=>{uni.$tool.alert(e.info,(()=>{"cart"==P.from?uni.$tool.navto("/pages/cart/cart"):uni.$tool.back()}))}))}function le({detail:e}){R=e.value,P.take_type=R,R==v.value.order.TAKE_TYPE_SELF?P.address_gid="":R==v.value.order.TAKE_TYPE_DELIVER&&(P.station_gid=""),oe()}function oe(){uni.$login.judgeLogin((()=>{ae()}))}function ne(){0==N.value.length?ie((()=>M.value.open())):M.value.open()}async function ie(e){const t=await uni.$http.get("v1/getAddressList");if(1!=t.code)return uni.$tool.tip(t.info||"系统错误");N.value=t.data.list,e&&e()}function se(e){W.value=e,P.address_gid=e.gid,M.value.close()}function ue(){0==B.value.length?async function(e){let t={lat:39.136465,lng:117.209932};const a=await uni.$http.get("v1/getStationListWithDistance",t);if(1!=a.code)return uni.$tool.tip(a.info||"系统错误");B.value=a.data.list,e&&e()}((()=>G.value.open())):G.value.open()}function ce(e){Q.value=e,P.station_gid=e.gid,G.value.close()}function de(){0==z.value.length?async function(e){e&&e()}((()=>F.value.open())):F.value.open()}function re(e){F.value.close(),P.coupon_gid=e.gid,oe()}function pe(){K.value={},F.value.close(),P.coupon_gid="",oe()}async function fe(){Z.value.open()}function me(e){if("giftcard"==e.payType){if(e.cardHasMoney<C.value.pay_amount)return uni.$tool.tip("所选实物卡余额不足");P.gift_card_sns=e.selectedSn}else P.gift_card_sns=[];X.value=e.payType,Z.value.close(),P.pay_type=X.value}const ve=uni.$tool.debounce((()=>{ye(C.value.sn,X.value)})),_e=uni.$tool.debounce((()=>0==C.value.subs.length||0==C.value.goods_total?uni.$tool.tip("订单中没有商品"):-1==R?uni.$tool.tip("请选择收货方式"):R!=v.value.order.TAKE_TYPE_SELF||P.station_gid?R!=v.value.order.TAKE_TYPE_DELIVER||P.address_gid?""==X.value?uni.$tool.tip("请选择有效的支付方式"):"giftcard"==X.value&&0==P.gift_card_sns.length?uni.$tool.tip("请选择有效的实物卡",!0,null,2):g?uni.$tool.tip("订单已创建，请到我的订单列表继续支付"):(P.remark=D.value,void uni.$http.post("v1/createOrderFromConfirmV2",P).then((e=>{if(!e.data.sn)return uni.$tool.tip("订单创建失败");g=!0,ye(e.data.sn,X.value,!0)}))):uni.$tool.tip("请选择收货地址"):uni.$tool.tip("请选择水站")));async function ye(e,t,a=!1){if(C.value.pay_amount<0)return uni.$tool.tip("支付金额不能小于0");switch(0==C.value.pay_amount&&(t="yue"),t){case"yue":uni.$http.post(`v1/payOrder/${e}`,{pay_type:t}).then((t=>{uni.$tool.navto("/pages/pay/success?type=order&sn="+e)}));break;case"giftcard":let l=P.gift_card_sns;uni.$http.post(`v1/payOrder/${e}`,{pay_type:t,gift_card_sns:l}).then((t=>{uni.$tool.navto("/pages/pay/success?type=order&sn="+e)}));break;case"weixin":const o=await uni.$api.getPayInfo("order",e);if(1!=o.code)return uni.$tool.tip(o.info||"系统错误");uni.$tool.payment(o.data.payInfo,(()=>{uni.$tool.navto("/pages/pay/success?type=order&sn="+e)}),(()=>{a&&uni.$tool.tip("订单已创建",!0,(()=>{uni.$tool.redirect("/pages/order/list")}))}));break;default:return uni.$tool.tip("请选择有效的支付方式")}}function ge(){uni.$tool.back()}return(i,d)=>{const v=u,g=V(e("uni-data-checkbox"),w),k=c,b=V(e("uni-icons"),A),j=V(e("v-order-sub-item2"),I),P=V(e("v-order-info-item"),S),ee=V(e("uni-easyinput"),L),ae=x,oe=V(e("v-order-confirm-bar2"),T),ye=V(e("v-pay-type-select"),U),ke=V(e("v-coupon-select"),H),he=V(e("v-station-select"),q),be=V(e("v-address-select"),Y);return t(),a(v,{class:"container-v confirm"},{default:l((()=>[y.value?(t(),r(p,{key:0},[o(v,{class:"take-type"},{default:l((()=>[o(v,null,{default:l((()=>[n("收货方式：")])),_:1}),o(g,{modelValue:_(R),"onUpdate:modelValue":d[0]||(d[0]=e=>h(R)?R.value=e:R=e),onChange:le,localdata:_(O)},null,8,["modelValue","localdata"])])),_:1}),0==_(R)?(t(),a(v,{key:0,class:"confirm-item address",onClick:ue},{default:l((()=>[_(Q)&&_(Q).gid?(t(),a(v,{key:0,class:"address-info"},{default:l((()=>[n(s(_(Q).title)+" ",1),o(k,null,{default:l((()=>[n(s("\n"))])),_:1}),n(" "+s(_(Q).province?_(Q).province+", ":"")+s(_(Q).city?_(Q).city+", ":"")+" "+s(_(Q).district?_(Q).district+", ":"")+" "+s(_(Q).street?_(Q).street+", ":"")+" "+s(_(Q).detail)+" ",1),o(k,null,{default:l((()=>[n(s("\n"))])),_:1}),n(" "+s(_(Q).link_name)+" "+s(_(Q).link_phone),1)])),_:1})):(t(),a(v,{key:1,class:"address-info"},{default:l((()=>[n("请选择水站")])),_:1})),o(b,{type:"right",color:"#999999"})])),_:1})):1==_(R)?(t(),a(v,{key:1,class:"confirm-item address",onClick:ne},{default:l((()=>[_(W)&&_(W).gid?(t(),a(v,{key:0,class:"address-info"},{default:l((()=>[n(s(_(W).province?_(W).province+", ":"")+s(_(W).city?_(W).city+", ":"")+" "+s(_(W).district?_(W).district+", ":"")+" "+s(_(W).street?_(W).street+", ":"")+" "+s(_(W).detail)+" ",1),o(k,null,{default:l((()=>[n(s("\n"))])),_:1}),n(" "+s(_(W).link_name)+"，"+s(_(W).link_phone),1)])),_:1})):(t(),a(v,{key:1,class:"address-info"},{default:l((()=>[n("请选择收货地址")])),_:1})),o(b,{type:"right",color:"#999999"})])),_:1})):m("",!0)],64)):C.value.sn?(t(),r(p,{key:1},[o(v,{class:"take-type v-mb-20"},{default:l((()=>[o(v,{class:"v-mr-20"},{default:l((()=>[n("收货方式："),o(k,{class:"color-desc"},{default:l((()=>[n(s(C.value.take_type_txt),1)])),_:1})])),_:1})])),_:1}),_(Q)&&_(Q).gid?(t(),a(v,{key:0,class:"confirm-item address"},{default:l((()=>[o(v,{class:"address-info"},{default:l((()=>[n(s(_(Q).title)+" ",1),o(k,null,{default:l((()=>[n(s("\n"))])),_:1}),n(" "+s(_(Q).province?_(Q).province+", ":"")+s(_(Q).city?_(Q).city+", ":"")+" "+s(_(Q).district?_(Q).district+", ":"")+" "+s(_(Q).street?_(Q).street+", ":"")+" "+s(_(Q).detail)+" ",1),o(k,null,{default:l((()=>[n(s("\n"))])),_:1}),n(" "+s(_(Q).link_name)+" "+s(_(Q).link_phone),1)])),_:1})])),_:1})):_(W)&&_(W).gid?(t(),a(v,{key:1,class:"confirm-item address"},{default:l((()=>[o(v,{class:"address-info"},{default:l((()=>[n(s(_(W).province?_(W).province+", ":"")+s(_(W).city?_(W).city+", ":"")+" "+s(_(W).district?_(W).district+", ":"")+" "+s(_(W).street?_(W).street+", ":"")+" "+s(_(W).detail)+" ",1),o(k,null,{default:l((()=>[n(s("\n"))])),_:1}),n(" "+s(_(W).link_name)+"，"+s(_(W).link_phone),1)])),_:1})])),_:1})):m("",!0)],64)):m("",!0),o(v,{class:"address-bottom-line"}),o(v,{class:"confirm-item order-items"},{default:l((()=>[C.value.sn?(t(),a(v,{key:0,class:"order-sn"},{default:l((()=>[n(" 编号: "),o(k,{class:"value"},{default:l((()=>[n(s(C.value.sn),1)])),_:1}),o(k,{class:"copy-sn",onClick:te},{default:l((()=>[n("点击复制")])),_:1})])),_:1})):m("",!0),(t(!0),r(p,null,f(C.value.subs,((e,l)=>(t(),a(j,{key:e.gid,item:e},null,8,["item"])))),128))])),_:1}),o(v,{class:"confirm-item order-infos"},{default:l((()=>[o(P,{title:"商品金额",value:"￥"+(C.value.goods_amount||"0.00")},null,8,["value"]),o(P,{title:"优惠金额",value:"-￥"+(C.value.discount_amount||"0.00"),color:"#da4754",bold:""},null,8,["value"]),o(P,{title:"商品实付金额",value:"￥"+(C.value.real_amount||"0.00"),bold:""},null,8,["value"]),o(P,{title:"服务费",title2:E.value,title2color:"#da4754",value:"￥"+(C.value.deliver_amount||"0.00")},null,8,["title2","value"]),0==C.value.status?(t(),a(P,{key:0,title:"支付方式",value:_(J)[_(X)],type:"pay_type",color:"#999",onAction:fe},null,8,["value"])):(t(),a(P,{key:1,title:"支付方式",value:_(J)[_(X)],type:"pay_type",color:"#999",showRightIcon:!1},null,8,["value"])),y.value?(t(),a(P,{key:2,title:"优惠券",value:K.value.title||"选择优惠券",type:"coupon",color:"#999",onAction:de},null,8,["value"])):C.value.sn?(t(),a(P,{key:3,title:"优惠券",value:K.value&&K.value.title||"未使用",color:"#999"},null,8,["value"])):m("",!0)])),_:1}),o(v,{class:"confirm-item"},{default:l((()=>[y.value?(t(),a(ee,{key:0,type:"textarea",modelValue:_(D),"onUpdate:modelValue":d[1]||(d[1]=e=>h(D)?D.value=e:D=e),trim:"",maxlength:"100",placeholder:"请输入您的备注",autoHeight:""},null,8,["modelValue"])):C.value.sn?(t(),a(v,{key:1,class:"v-p-20 v-b-r-10"},{default:l((()=>[o(k,{class:"v-bold"},{default:l((()=>[n("订单备注：")])),_:1}),n(s(_(D)),1)])),_:1})):m("",!0)])),_:1}),C.value.deliver_remark?(t(),a(v,{key:2,class:"confirm-item"},{default:l((()=>[o(v,{class:"v-p-20 v-b-r-10"},{default:l((()=>[o(k,{class:"v-bold"},{default:l((()=>[n("配送说明：")])),_:1}),n(s(C.value.deliver_remark),1)])),_:1})])),_:1})):m("",!0),C.value.deliver_images?(t(),a(v,{key:3,class:"confirm-item"},{default:l((()=>[o(v,{class:"v-p-20 v-b-r-10"},{default:l((()=>[o(v,{class:"v-mb-10 v-bold"},{default:l((()=>[n("配送照片：")])),_:1}),o(v,{class:"deliver-images"},{default:l((()=>[(t(!0),r(p,null,f(C.value.deliver_images,((e,l)=>(t(),a(ae,{class:"deliver-image",onClick:e=>function(e){$({current:e,urls:C.value.deliver_images})}(l),src:e,key:l,mode:"widthFix"},null,8,["onClick","src"])))),128))])),_:1})])),_:1})])),_:1})):m("",!0),o(v,{style:{width:"100rpx",height:"120rpx"}}),y.value?(t(),a(oe,{key:4,money:C.value.pay_amount||"",number:C.value.goods_total,action:"create",onCreateOrder:_(_e)},null,8,["money","number","onCreateOrder"])):C.value.sn&&0==C.value.status?(t(),a(oe,{key:5,money:C.value.pay_amount||"",number:C.value.goods_total,action:"pay",onPayOrder:_(ve)},null,8,["money","number","onPayOrder"])):C.value.sn&&C.value.status>0?(t(),a(oe,{key:6,money:C.value.pay_amount||"",number:C.value.goods_total,action:"navto",onNavto:ge},null,8,["money","number"])):m("",!0),o(ye,{ref_key:"payTypeSelect",ref:Z,list:_(J),onSelect:me},null,8,["list"]),o(ke,{ref_key:"couponSelectRef",ref:F,list:z.value,onSelect:re,onReset:pe},null,8,["list"]),o(he,{ref_key:"stationSelectRef",ref:G,list:B.value,onSelect:ce},null,8,["list"]),o(be,{ref_key:"addressSelectRef",ref:M,list:N.value,onSelect:se,onReload:ie},null,8,["list"])])),_:1})}}},[["__scopeId","data-v-7cf9958d"]]);export{N as default};
